version: '3.2'
services:
  stubapi:
    build: ../stubapi
    container_name: stubapi
    ports:
      - '8080:8080'
      - '8443:8080'
    volumes:
      - '../stubapi/__files:/home/wiremock/__files'
      - '../stubapi/mappings:/home/wiremock/mappings'

  requests:
    image: sitture/docker-gauge-java
    container_name: requests
    depends_on:
      - stubapi
    volumes:
      - '../:/usr/src/app'
      - '/Users/${USER}/.m2:/root/.m2'
    command: mvn clean install -Denv=local
